@using Forms.Mvc.Models.Answers.AnswersModels;
@using Microsoft.AspNetCore.Mvc.Localization;
@model StringAnswer
@inject IViewLocalizer Localizer
@{
    var modalId = ViewData["ModalId"] as string ?? "somethingWrongWithThisModal";
}
<div class="modal fade" tabindex="-1" id="@modalId">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content justify-content-center">
            <form asp-controller="Answers" asp-action="UpdateStringAnswer" method="post">
            <div class="modal-header">
            <div class="modal-title h5">@Model.Question?.QuestionText</div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="@Localizer["Close"]"></button>
            </div>
            <div class="modal-body">
                
                    <input asp-for="FormId" hidden />
                    <input asp-for="Index" hidden />
                    <input asp-for="IsRequired" hidden />
                    <input asp-for="QuestionId" hidden />
                    <div class="form-group mt-2">
                        <input class="form-control" asp-for="AnswerValue" />
                    </div>
                    <div class="form-group mt-2">
                        <button type="submit" class="btn btn-success form-control">@Localizer["Send"]</button>
                    </div>
                
            </div>
        </form>
            </div>
    </div>
</div>


@*<script>
    addEventListener("load", (event) => {
        document.getElementById("@(modelId)-answer")?.addEventListener("blur", () => {
            console.log("@(modelId)-answer lost focus");
            let result = updateForm("POST", actionUrl, @(modelId)body())
                .then(data => {
                    console.log("gets data");
                    //document.getElementById("options-@Model.QuestionId").appendChild(createElementFromHTML(data));
                })
                .catch(err => console.error(err));
        });
    });
    function @(modelId)body() {
        let result = {
            FormId: document.getElementById("@(modelId)-formid").value,
            Index: Number(document.getElementById("@(modelId)-index").value),
            IsRequired: document.getElementById("@(modelId)-isrequired").value == "true",
            QuestionId: document.getElementById("@(modelId)-questionid").value,
            Answer: document.getElementById("@(modelId)-answer").value
        };
        console.log(JSON.stringify(result));
        return JSON.stringify(result);
    }
    
</script>*@